<ion-header>
  <ion-navbar color="primary">
    <ion-title >
      Ionic Chat
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

<ng-container *ngFor="let comment of comments"><!--追加-->
  <ion-grid>
    <ion-row>

      <!--current_user.uidとcomment.user.uidが等しくない場合に表示-->
      <ion-col col-2 *ngIf="comment.user.uid !== current_user.uid">
        <div class="media-left">
            <a href="#" class="icon-rounded">{{comment.initial}}</a>
        </div>
      </ion-col>

      <ion-col col-10>
        <div class="media-body">
            <!--DatePipeを追加-->
            <h4 class="media-heading">{{comment.user.name}} Date:{{comment.date | chatDate }}</h4><!--comment.nameに変更-->
            <div>{{comment.content}}</div><!--comment.contentに変更-->
        </div>
      </ion-col>

      <!--current_user.uidとcomment.user.uidが等しい場合に表示-->
      <ion-col col-2 class="media-right" *ngIf="comment.user.uid === current_user.uid">
        <div class="media-right">
          <a href="#" class="icon-rounded">{{comment.initial}}</a>
        </div>
      </ion-col>

    </ion-row>
  </ion-grid>
</ng-container>

<!-- Realtime Databaseの反映箇所 -->
<ion-grid>
  <ion-row *ngFor="let item of items | async">
    <ion-col col-2 >
      <div class="media-left">
          <a href="#" class="icon-rounded">{{item.initial}}</a>
      </div>
    </ion-col>

    <ion-col col-10>
      <div class="media-body">
          <h4 class="media-heading">{{item.name}}</h4>
          <div>{{item.content}}</div>
      </div>
    </ion-col>
  </ion-row>
</ion-grid>


<hr>

<ion-grid>
  <ion-row>
    <ion-col col-10>
      <ion-item>
        <ion-input type="text" [(ngModel)]="content" name="comment" placeholder="Comment"></ion-input>
      </ion-item>
    </ion-col>
    <ion-col col-2>
      <button ion-button (click)="addComment(content)">SEND</button>
    </ion-col>
  </ion-row>
</ion-grid>

</ion-content>

